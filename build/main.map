{"version":3,"sources":["webpack:///webpack/bootstrap c70f9c78a66ee8b67ad0","webpack:///external \"express\"","webpack:///./server/index.js","webpack:///external \"nuxt\"","webpack:///./server/routes/index.js","webpack:///./server/routes/users.js","webpack:///./server/routes/auth.js","webpack:///external \"body-parser\"","webpack:///external \"express-session\"","webpack:///external \"mongoose\"","webpack:///./server/socketEvents.js","webpack:///external \"http\"","webpack:///external \"socket.io\"","webpack:///./nuxt.config.js","webpack:///./server/helpers.js","webpack:///./server/models/user.js","webpack:///external \"bcrypt-nodejs\""],"names":["app","express","host","process","env","HOST","port","PORT","DB_URI","DB_URL","server","require","createServer","io","listen","socketEvents","mongoose","connect","set","use","bodyParser","json","session","secret","secretKey","resave","saveUninitialized","cookie","maxAge","config","dev","nuxt","builder","build","render","console","log","router","Router","users","id","name","username","avatar","get","req","res","next","User","find","then","catch","status","send","parseInt","params","length","sendStatus","post","body","password","error","findOne","err","existingUser","user","save","userInfo","userTransformer","authUser","message","ok","on","socket","broadcast","emit","module","exports","head","title","link","rel","href","loading","color","css","manifest","theme_color","modules","plugins","axios","baseURL","HOST_URL","request","_id","firstName","Schema","UserSchema","type","String","lowercase","unique","required","timestamps","pre","SALT_FACTOR","isModified","bcrypt","genSalt","salt","hash","methods","comparePassword","candidatePassword","cb","compare","isMatch","model"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c70f9c78a66ee8b67ad0","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 0\n// module chunks = 0","import express from 'express'\nimport { Nuxt, Builder } from 'nuxt'\nimport routes from './routes'\nimport bodyParser from 'body-parser'\nimport session from 'express-session'\nimport mongoose from 'mongoose'\nimport socketEvents from './socketEvents'\n\nconst app = express()\nconst host = process.env.HOST || '127.0.0.1'\nconst port = process.env.PORT || 3000\nconst DB_URI = process.env.DB_URL || 'mongodb://localhost/chat-app-dev'\nconst server = require('http').createServer(app)\n\nconst io = require('socket.io').listen(server)\nsocketEvents(io)\n\nmongoose.connect(DB_URI)\n\napp.set('port', port)\n\napp.use(bodyParser.json())\n\napp.use(session({\n  secret: process.env.secretKey || '7CigmgctzNfojD5D3eJ7tY62axBuFICn',\n  resave: false,\n  saveUninitialized: false,\n  cookie: { maxAge: 60000 }\n}))\n\n// Import API Routes\napp.use('/api', routes)\n\n// Import and Set Nuxt.js options\nlet config = require('../nuxt.config.js')\nconfig.dev = !(process.env.NODE_ENV === 'production')\n\n// Init Nuxt.js\nconst nuxt = new Nuxt(config)\n\n// Build only in dev mode\nif (config.dev) {\n  const builder = new Builder(nuxt)\n  builder.build()\n}\n\n// Give nuxt middleware to express\napp.use(nuxt.render)\n\n// Listen the server\n// app.listen(port, host)\nserver.listen(port, host)\nconsole.log('Server listening on ' + host + ':' + port) // eslint-disable-line no-console\n\n\n\n// WEBPACK FOOTER //\n// ./server/index.js","module.exports = require(\"nuxt\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"nuxt\"\n// module id = 2\n// module chunks = 0","import { Router } from 'express'\n\nimport users from './users'\nimport auth from './auth'\n\nconst router = Router()\n\n// Add Routes\nrouter.use(users)\nrouter.use(auth)\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/index.js","import { Router } from 'express'\nimport { userTransformer } from '../helpers'\nimport User from '../models/user'\n\nconst router = Router()\n\n// Mock Users\nconst users = [\n  { id: 1, name: 'Joan Pearson', username: 'john', avatar: 'http://lorempixel.com/55/55/people/1/' },\n  { id: 2, name: 'Ruth Kelly', username: 'ruth', avatar: 'http://lorempixel.com/55/55/people/2/' },\n  { id: 3, name: 'Dennis Bennett', username: 'dennis', avatar: 'http://lorempixel.com/55/55/people/3/' },\n  { id: 4, name: 'Julia Munoz', username: 'julia', avatar: 'http://lorempixel.com/55/55/people/4/' },\n  { id: 5, name: 'David Walker', username: 'david', avatar: 'http://lorempixel.com/55/55/people/5/' },\n  { id: 6, name: 'Aaron Gutierrez', username: 'aaron', avatar: 'http://lorempixel.com/55/55/people/6/' },\n  { id: 7, name: 'Margaret Pearson', username: 'margaret', avatar: 'http://lorempixel.com/55/55/people/7/' }\n]\n\n/* GET users listing. */\nrouter.get('/users', function(req, res, next) {\n  User.find({})\n  .then(users => {\n    res.json(users)\n  })\n  .catch(error => {\n    // Place error handler here\n    res.status(500).send('Something went wrong')\n  })\n})\n\n/* GET user by ID. */\nrouter.get('/users/:id', function(req, res, next) {\n  const id = parseInt(req.params.id)\n  if (id >= 0 && id < users.length) {\n    res.json(users[id])\n  } else {\n    res.sendStatus(404)\n  }\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/users.js","import { Router } from 'express'\nimport User from '../models/user'\nimport { userTransformer } from '../helpers'\n\nconst router = Router()\n\n// Add POST - /api/register\nrouter.post('/register', (req, res, next) => {\n  // Check for registration errors\n  const username = req.body.username\n  const name = req.body.name\n  const password = req.body.password\n\n  // Return error if username is not provided\n  if (!username) {\n    return res.status(422).send({ error: 'You must enter an username.' })\n  }\n\n  // Return error if name not provided\n  if (!name) {\n    return res.status(422).send({ error: 'You must enter name.' })\n  }\n\n  // Return error if no password provided\n  if (!password) {\n    return res.status(422).send({ error: 'You must enter a password.' })\n  }\n\n  User.findOne({ username }, (err, existingUser) => {\n    if (err) { return next(err) }\n\n      // If user is not unique, return error\n    if (existingUser) {\n      return res.status(422).send({ error: 'That username address is already in use.' })\n    }\n\n      // If username is unique and password was provided, create account\n    const user = new User({\n      username,\n      password,\n      name: name\n    })\n\n    user.save((err, user) => {\n      if (err) { return next(err) }\n\n      const userInfo = userTransformer(user)\n\n      req.session.authUser = userInfo\n\n      res.status(201).json(userInfo)\n    })\n  })\n})\n\n// Add POST - /api/login\nrouter.post('/login', (req, res) => {\n  if (req.body.username === 'demo' && req.body.password === 'demo') {\n    // Use static name for now\n    const authUser = {\n      id: 8,\n      name: req.body.username,\n      username: req.body.username,\n      avatar: 'http://lorempixel.com/55/55/people/8/'\n    }\n\n    req.session.authUser = authUser\n    return res.json(authUser)\n  }\n  res.status(401).json({ message: 'Bad credentials' })\n})\n\n// Add POST - /api/logout\nrouter.post('/logout', (req, res) => {\n  delete req.session.authUser\n  res.json({ ok: true })\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./server/routes/auth.js","module.exports = require(\"body-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"body-parser\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"express-session\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express-session\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 8\n// module chunks = 0","export default function(io) {\n  // Set socket.io listeners.\n  io.on('connection', (socket) => {\n    console.log('a user connected')\n\n    socket.on('disconnect', () => {\n      console.log('user disconnected')\n    })\n\n    socket.on('send-message', function(message) {\n      socket.broadcast.emit('new-message', message)\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./server/socketEvents.js","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"socket.io\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"socket.io\"\n// module id = 11\n// module chunks = 0","module.exports = {\n  /*\n  ** Headers\n  ** Common headers are already provided by @nuxtjs/pwa preset\n  */\n  head: {\n    title: 'BinBytes - Chat App',\n    link: [\n      { rel: 'stylesheet', href: 'https://fonts.googleapis.com/css?family=Lato:400,700' },\n      { rel: 'stylesheet', href: 'https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css' }\n    ]\n  },\n  /*\n  ** Customize the progress-bar color\n  */\n  loading: { color: '#3B8070' },\n  css: [\n    './node_modules/milligram/dist/milligram.min.css'\n  ],\n  /*\n  ** Customize app manifest\n  */\n  manifest: {\n    theme_color: '#3B8070'\n  },\n  /*\n  ** Modules\n  */\n  modules: [\n    '@nuxtjs/pwa',\n    '@nuxtjs/axios'\n  ],\n  /*\n  ** Plugins\n  */\n  plugins: [\n    '~plugins/socket.io'\n  ],\n  /*\n  ** Axios settings\n  */\n  axios: {\n    baseURL: process.env.HOST_URL || `http://${process.env.HOST || 'localhost'}:${process.env.HOST_URL || 3000}`\n  },\n  env: {\n    HOST_URL: process.env.HOST_URL || 'http://localhost:3000'\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./nuxt.config.js","const userTransformer = (request) => {\n  return {\n    _id: request._id,\n    firstName: request.name,\n    username: request.username\n  }\n}\n\nexport { userTransformer }\n\n\n\n// WEBPACK FOOTER //\n// ./server/helpers.js","// Importing Node packages required for schema\nimport mongoose from 'mongoose'\nimport bcrypt from 'bcrypt-nodejs'\n\nconst Schema = mongoose.Schema\n\n//================================\n// User Schema\n//================================\nconst UserSchema = new Schema({\n  username: {\n    type: String,\n    lowercase: true,\n    unique: true,\n    required: true\n  },\n  password: {\n    type: String,\n    required: true\n  },\n  name: {\n    type: String,\n    required: true\n  }\n},\n  {\n    timestamps: true\n  })\n\n//================================\n// User ORM Methods\n//================================\n\n// Pre-save of user to database, hash password if password is modified or new\nUserSchema.pre('save', function(next) {\n  const user = this, SALT_FACTOR = 5\n\n  if (!user.isModified('password')) return next()\n\n  bcrypt.genSalt(SALT_FACTOR, (err, salt) => {\n    if (err) return next(err)\n\n    bcrypt.hash(user.password, salt, null, (err, hash) => {\n      if (err) return next(err)\n      user.password = hash\n      next()\n    })\n  })\n})\n\n// Method to compare password for login\nUserSchema.methods.comparePassword = function(candidatePassword, cb) {\n  bcrypt.compare(candidatePassword, this.password, (err, isMatch) => {\n    if (err) { return cb(err) }\n\n    cb(null, isMatch)\n  })\n}\n\nexport default mongoose.model('User', UserSchema)\n\n\n\n// WEBPACK FOOTER //\n// ./server/models/user.js","module.exports = require(\"bcrypt-nodejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bcrypt-nodejs\"\n// module id = 15\n// module chunks = 0"],"sourceRoot":""}